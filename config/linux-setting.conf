# Linux 環境設定腳本 - 配置檔案範本
# 複製此檔案到 ~/.config/linux-setting/config 並依照需求修改

# ==============================================================================
# 一般設定
# ==============================================================================

# 安裝模式：full, minimal, update
INSTALL_MODE="${INSTALL_MODE:-full}"

# 更新模式：true/false
UPDATE_MODE="${UPDATE_MODE:-false}"

# 詳細模式：true/false
VERBOSE="${VERBOSE:-false}"

# 試運模式（預覽）：true/false
DRY_RUN="${DRY_RUN:-false}"

# 啟用並行安裝
ENABLE_PARALLEL_INSTALL="${ENABLE_PARALLEL_INSTALL:-true}"

# 並行任務數量（預設：auto 偵測 CPU 核心數）
PARALLEL_JOBS="${PARALLEL_JOBS:-auto}"

# ==============================================================================
# 儲存庫設定
# ==============================================================================

# 主要儲存庫 URL
REPO_URL="${REPO_URL:-https://raw.githubusercontent.com/guan4tou2/my-linux-setting/main}"

# 腳本 URL
SCRIPTS_URL="${SCRIPTS_URL:-$REPO_URL/scripts}"

# P10K 配置 URL
P10K_CONFIG_URL="${P10K_CONFIG_URL:-$REPO_URL/.p10k.zsh}"

# Requirements URL
REQUIREMENTS_URL="${REQUIREMENTS_URL:-$REPO_URL/requirements.txt}"

# ==============================================================================
# TUI 設定
# ==============================================================================

# TUI 模式：auto, true, false
USE_TUI="${USE_TUI:-auto}"

# TUI 顯示模式：quiet, normal
TUI_MODE="${TUI_MODE:-quiet}"

# ==============================================================================
# 安全性設定
# ==============================================================================

# 啟用 GPG 簽名驗證
ENABLE_GPG_VERIFY="${ENABLE_GPG_VERIFY:-true}"

# 啟用安全下載驗證
ENABLE_SECURE_DOWNLOAD="${ENABLE_SECURE_DOWNLOAD:-true}"

# 允許腳本通過管道傳輸到 shell（有風險）
SECURE_DOWNLOAD_ALLOW_PIPE="${SECURE_DOWNLOAD_ALLOW_PIPE:-0}"

# 最大下載腳本大小（位元組）
MAX_SCRIPT_SIZE="${MAX_SCRIPT_SIZE:-1048576}"

# 下載逾時時間（秒）
DOWNLOAD_TIMEOUT="${DOWNLOAD_TIMEOUT:-30}"

# ==============================================================================
# 日誌設定
# ==============================================================================

# 日誌目錄
LOG_DIR="${LOG_DIR:-$HOME/.local/log/linux-setting}"

# 啟用日誌記錄
ENABLE_LOGGING="${ENABLE_LOGGING:-true}"

# 日誌格式：text, json
LOG_FORMAT="${LOG_FORMAT:-text}"

# 最大日誌檔案大小（MB）
MAX_LOG_SIZE="${MAX_LOG_SIZE:-10}"

# 最大日誌檔案保存天數
MAX_LOG_AGE="${MAX_LOG_AGE:-30}"

# 保留的最大日誌檔案數量
MAX_LOG_COUNT="${MAX_LOG_COUNT:-10}"

# ==============================================================================
# 快取設定
# ==============================================================================

# 啟用快取
CACHE_ENABLED="${CACHE_ENABLED:-true}"

# 快取目錄
CACHE_DIR="${CACHE_DIR:-$HOME/.cache/linux-setting}"

# 快取存留時間（秒）
CACHE_TTL="${CACHE_TTL:-86400}"

# ==============================================================================
# 備份設定
# ==============================================================================

# 備份目錄
BACKUP_DIR="${BACKUP_DIR:-$HOME/.config/linux-setting-backup}"

# 啟用失敗自動回復
ENABLE_AUTO_ROLLBACK="${ENABLE_AUTO_ROLLBACK:-true}"

# ==============================================================================
# 套件管理器設定
# ==============================================================================

# 強制重新安裝（即使套件已存在）
FORCE_REINSTALL="${FORCE_REINSTALL:-false}"

# 跳過依賴檢查
SKIP_DEPENDENCY_CHECKS="${SKIP_DEPENDENCY_CHECKS:-false}"

# 跳過 Python 版本檢查
SKIP_PYTHON_CHECK="${SKIP_PYTHON_CHECK:-false}"

# ==============================================================================
# Homebrew 設定
# ==============================================================================

# 優先使用 Homebrew 安裝套件
PREFER_HOMEBREW="${PREFER_HOMEBREW:-true}"

# Homebrew 安裝路徑：auto, /home/linuxbrew, $HOME/.linuxbrew
HOMEBREW_INSTALL_PATH="${HOMEBREW_INSTALL_PATH:-auto}"

# ==============================================================================
# Python 設定
# ==============================================================================

# Python 虛擬環境路徑
PYTHON_VENV_DIR="${PYTHON_VENV_DIR:-$HOME/.local/venv/system-tools}"

# 優先使用 uv 而非 pip
PREFER_UV="${PREFER_UV:-true}"

# Python 鏡像源：auto, pypi.org, tuna, aliyun
PYTHON_MIRROR="${PYTHON_MIRROR:-auto}"

# ==============================================================================
# Docker 設定
# ==============================================================================

# 自動將使用者加入 docker 群組
ADD_USER_TO_DOCKER_GROUP="${ADD_USER_TO_DOCKER_GROUP:-true}"

# Docker Compose 版本
DOCKER_COMPOSE_VERSION="${DOCKER_COMPOSE_VERSION:-latest}"

# ==============================================================================
# 效能設定
# ==============================================================================

# 啟用並行安裝的最小套件數量
MIN_PACKAGES_FOR_PARALLEL="${MIN_PACKAGES_FOR_PARALLEL:-3}"

# APT 並行下載
APT_PARALLEL_DOWNLOADS="${APT_PARALLEL_DOWNLOADS:-true}"

# ==============================================================================
# 平台設定
# ==============================================================================

# 架構：auto, x86_64, aarch64, armv7l
ARCH="${ARCH:-auto}"

# 平台偵測：auto, wsl, native, docker
PLATFORM="${PLATFORM:-auto}"

# ==============================================================================
# 網路設定
# ==============================================================================

# 下載重試次數
DOWNLOAD_RETRIES="${DOWNLOAD_RETRIES:-3}"

# 連線逾時時間（秒）
CONNECTION_TIMEOUT="${CONNECTION_TIMEOUT:-10}"

# Proxy 設定（可選）
# HTTP_PROXY="${HTTP_PROXY:-}"
# HTTPS_PROXY="${HTTPS_PROXY:-}"
# NO_PROXY="${NO_PROXY:-}"

# ==============================================================================
# 功能開關
# ==============================================================================

# 安裝系統監控工具
INSTALL_MONITORING="${INSTALL_MONITORING:-true}"

# 安裝開發工具
INSTALL_DEV_TOOLS="${INSTALL_DEV_TOOLS:-true}"

# 安裝 Docker 工具
INSTALL_DOCKER="${INSTALL_DOCKER:-true}"

# 安裝終端機工具
INSTALL_TERMINAL="${INSTALL_TERMINAL:-true}"

# 安裝 Python 工具
INSTALL_PYTHON="${INSTALL_PYTHON:-true}"

# 安裝基礎工具
INSTALL_BASE="${INSTALL_BASE:-true}"
