## Linux ç’°å¢ƒè¨­å®šè…³æœ¬ï¼ˆå¢å¼·ç‰ˆï¼‰

é€™æ˜¯ä¸€å¥—ç”¨ä¾† **å¿«é€Ÿå»ºç«‹ Ubuntu / Debian é–‹ç™¼ç’°å¢ƒ** çš„å®‰è£è…³æœ¬ï¼Œå…§å»ºäº’å‹•å¼é¸å–®ã€æ¨¡çµ„åŒ–å®‰è£ã€éŒ¯èª¤å›æ»¾èˆ‡è©³ç´°æ—¥èªŒï¼Œé©åˆåœ¨æ–°æ©Ÿã€VMã€WSL æˆ– CI æ¸¬è©¦ç’°å¢ƒä¸­å¿«é€Ÿè¤‡è£½ä¸€è‡´çš„é–‹ç™¼é«”é©—ã€‚

### âœ… ä¸»è¦ç‰¹è‰²

- **ä¸€è¡ŒæŒ‡ä»¤é ç«¯å®‰è£**ï¼ˆé€é `bash -c "$(curl ...)"`ï¼‰
- **äº’å‹•å¼é¸å–®**ï¼šè‡ªç”±é¸æ“‡è¦å®‰è£çš„æ¨¡çµ„
- **å®Œæ•´ Linux é–‹ç™¼ç’°å¢ƒ**ï¼šPython / Docker / çµ‚ç«¯ / ç·¨è¼¯å™¨ / ç›£æ§å·¥å…·
- **å®‰å…¨æ©Ÿåˆ¶**ï¼šå‚™ä»½èˆŠè¨­å®šã€å¤±æ•—æ™‚å¯å›æ»¾
- **uv ç‚ºé è¨­ Python åŒ…ç®¡ç†å™¨**ï¼Œå®‰è£/æ›´æ–°é€Ÿåº¦æ¯” pip å¿«éå¸¸å¤š

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ¨™æº–å®‰è£ï¼ˆæ¨è–¦ï½œäº’å‹•é¸å–®ï¼‰

```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/guan4tou2/my-linux-setting/main/install.sh)"
```

é€™å€‹æŒ‡ä»¤æœƒï¼š

- **ç›´æ¥å¾ GitHub ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬çš„ `install.sh`**
- å•Ÿå‹• **äº’å‹•å¼ TUI é¸å–®**ï¼Œè®“ä½ é¸æ“‡è¦å®‰è£çš„æ¨¡çµ„ï¼š
  - Python ç’°å¢ƒ
  - Docker ç›¸é—œå·¥å…·
  - åŸºç¤å·¥å…·
  - çµ‚ç«¯æ©Ÿè¨­å®š
  - é–‹ç™¼å·¥å…·
  - ç³»çµ±ç›£æ§èˆ‡å®‰å…¨å·¥å…·

å®‰è£å®Œæˆå¾Œï¼Œä½ æœƒå¾—åˆ°ä¸€ä»½ç°¡å–®çš„å®‰è£å ±å‘Šèˆ‡å‚™ä»½/æ—¥èªŒä½ç½®èªªæ˜ã€‚

---

## âš™ï¸ æŒ‡ä»¤åˆ—é¸é …èˆ‡åƒæ•¸

æ‰€æœ‰é¸é …éƒ½å¯ä»¥åœ¨ **åŒä¸€æ¢ `bash -c "$(curl ...)"` æŒ‡ä»¤å¾Œé¢åŠ åƒæ•¸** ä¾†ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š

```bash
# æœ€å°å®‰è£ï¼ˆåƒ…å®‰è£ç²¾ç°¡å¿…è¦å·¥å…·ï¼Œä¾‹å¦‚åŸºç¤å·¥å…·ç­‰ï¼‰
bash -c "$(curl -fsSL https://raw.githubusercontent.com/guan4tou2/my-linux-setting/main/install.sh)" --minimal

# æ›´æ–°æ¨¡å¼ï¼ˆåªåŸ·è¡Œæ›´æ–°æµç¨‹ï¼Œä¸é‡æ–°è·‘å®Œæ•´äº’å‹•å®‰è£æµç¨‹ï¼‰
bash -c "$(curl -fsSL https://raw.githubusercontent.com/guan4tou2/my-linux-setting/main/install.sh)" --update

# è©³ç´°æ¨¡å¼ï¼ˆå•Ÿç”¨é™¤éŒ¯ç”¨çš„è©³ç´°æ—¥èªŒï¼‰
bash -c "$(curl -fsSL https://raw.githubusercontent.com/guan4tou2/my-linux-setting/main/install.sh)" --verbose

# é¡¯ç¤ºå¹«åŠ©èªªæ˜ï¼ˆåƒ…åˆ—å‡ºé¸é …èˆ‡èªªæ˜ï¼Œä¸åŸ·è¡Œå®‰è£ï¼‰
bash -c "$(curl -fsSL https://raw.githubusercontent.com/guan4tou2/my-linux-setting/main/install.sh)" --help
```

**ç›®å‰æ”¯æ´çš„åƒæ•¸ä¸€è¦½ï¼š**

- `--minimal`ï¼šæœ€å°å®‰è£æ¨¡å¼ï¼Œåªå®‰è£ç²¾ç°¡å¿…è¦å·¥å…·
- `--update`ï¼šæ›´æ–°æ¨¡å¼ï¼ŒåŸ·è¡Œ `update_tools.sh` æ›´æ–°å·²å®‰è£å·¥å…·
- `-v` / `--verbose`ï¼šé–‹å•Ÿè©³ç´°æ—¥èªŒèˆ‡é™¤éŒ¯è¼¸å‡º
- `-h` / `--help`ï¼šé¡¯ç¤ºå®‰è£è…³æœ¬çš„ä½¿ç”¨èªªæ˜

> **å‚™è¨»**ï¼šå¦‚æœä½ æ˜¯ `git clone` é€™å€‹ repo åˆ°æœ¬æ©Ÿï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œï¼š`./install.sh [é¸é …...]`ï¼Œæ•ˆæœèˆ‡ä¸Šè¿°é ç«¯æ–¹å¼ç›¸åŒã€‚

---

## ğŸ§© å®‰è£æ¨¡çµ„ä¸€è¦½

å®‰è£é¸å–®ä¸­æä¾›ä»¥ä¸‹æ¨¡çµ„ï¼ˆèˆ‡ `install.sh` å…§éƒ¨å¯¦éš›æ¨¡çµ„ç›¸å°æ‡‰ï¼‰ï¼š

- **1) Python é–‹ç™¼ç’°å¢ƒ**

  - Python3 èˆ‡ç›¸é—œå·¥å…·ï¼š
    - `python3`, `pip`, `python3-venv`
    - `python3-dev`, `python3-setuptools`
    - `uv`ï¼ˆç¾ä»£ Python åŒ…ç®¡ç†å™¨ï¼Œé è¨­åŒ…ç®¡ç†å·¥å…·ï¼‰
  - çµ‚ç«¯è¼”åŠ©å·¥å…·ï¼š
    - `ranger-fm`ï¼ˆçµ‚ç«¯æª”æ¡ˆç®¡ç†å™¨ï¼‰
    - `s-tui`ï¼ˆç³»çµ±ç›£æ§å·¥å…·ï¼‰

- **2) Docker ç›¸é—œå·¥å…·**

  - Docker å¼•æ“èˆ‡æ ¸å¿ƒçµ„ä»¶ï¼š
    - `docker-ce`, `docker-ce-cli`
    - `containerd.io`, `docker-buildx-plugin`
    - `docker-compose-plugin`
  - Docker ç®¡ç†å·¥å…·ï¼š
    - `lazydocker`

- **3) åŸºç¤å·¥å…·**

  - ç³»çµ±åŸºç¤å·¥å…·ï¼š
    - `git`, `curl`, `wget`, `unzip`, `tar`
    - `build-essential`, `pkg-config`
  - çµ‚ç«¯å¢å¼·å·¥å…·ï¼š
    - `lsd`ï¼ˆæ›´å¥½çš„ `ls`ï¼‰
    - `bat`ï¼ˆæ›´å¥½çš„ `cat`ï¼‰
    - `ripgrep`ï¼ˆæ›´å¥½çš„ `grep`ï¼‰
    - `fd-find`ï¼ˆæ›´å¥½çš„ `find`ï¼‰
    - `fzf`ï¼ˆæ¨¡ç³Šæœå°‹å·¥å…·ï¼‰

- **4) çµ‚ç«¯æ©Ÿè¨­å®š**

  - Shell èˆ‡ä¸»é¡Œï¼š
    - `zsh`
    - `oh-my-zsh`
    - `powerlevel10k`
  - Zsh æ’ä»¶ï¼š
    - `zsh-autosuggestions`
    - `zsh-syntax-highlighting`
    - `zsh-history-substring-search`
    - `you-should-use`

- **5) é–‹ç™¼å·¥å…·**

  - ç·¨è¼¯å™¨èˆ‡ Git ä»‹é¢ï¼š
    - `neovim`ï¼ˆæ­é… LazyVim è¨­å®šï¼‰
    - `lazygit`
  - é–‹ç™¼ç›¸é—œç’°å¢ƒï¼š
    - `nodejs`, `npm`
    - `cargo`ï¼ˆRust åŒ…ç®¡ç†å™¨ï¼‰
    - `lua`, `luarocks`

- **6) ç³»çµ±ç›£æ§èˆ‡å®‰å…¨å·¥å…·**

  - ç³»çµ±è³‡æºç›£æ§ï¼š
    - `btop`, `htop`
  - ç¶²è·¯ç›£æ§ï¼š
    - `iftop`, `nethogs`
  - å®‰å…¨ç›¸é—œï¼š
    - `fail2ban`

- **7) å®‰è£æ‰€æœ‰æ¨¡çµ„**
  - ç­‰åŒæ–¼ä¾ç…§å…§å»ºé †åºå®‰è£ï¼š`base â†’ dev â†’ python â†’ terminal â†’ monitoring â†’ docker`

---

## ğŸ“¸ å®‰è£ç•«é¢é è¦½

![img](img/SCR-20250310-mmxt.png)

---

## ğŸ§ª æ¸¬è©¦èˆ‡é–‹ç™¼æµç¨‹

### æœ¬åœ°æ¸¬è©¦è…³æœ¬

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦ï¼ˆå»ºè­°åœ¨æ”¹å‹•è…³æœ¬å¾Œè·‘ä¸€æ¬¡ï¼‰
./tests/run_all_tests.sh

# å–®ç¨æ¸¬è©¦
./tests/test_dependencies.sh    # ä¾è³´æª¢æŸ¥ï¼ˆå¦‚ apt / curl / sudo ç­‰ï¼‰
./tests/test_functionality.sh   # åŠŸèƒ½æ¸¬è©¦ï¼ˆæ¨¡çµ„æ˜¯å¦èƒ½æ­£ç¢ºåŸ·è¡Œï¼‰

# é è¦½å¯¦éš›æœƒå¥—ç”¨çš„é…ç½®
./scripts/preview_config.sh
```

### Docker æ¸¬è©¦ç’°å¢ƒ

```bash
# å¿«é€Ÿæ¸¬è©¦ï¼ˆbuild + testï¼‰
./docker-test.sh build && ./docker-test.sh test

# å¤šç³»çµ±æ¸¬è©¦
docker-compose -f docker-compose.test.yml up ubuntu-test
docker-compose -f docker-compose.test.yml --profile legacy up ubuntu20-test
docker-compose -f docker-compose.test.yml --profile debian up debian-test

# è‡ªå‹•åŒ–æ¸¬è©¦ï¼ˆCI æƒ…å¢ƒï¼‰
docker-compose -f docker-compose.test.yml --profile test up test-runner

# ä½¿ç”¨æœ¬æ©Ÿç¨‹å¼ç¢¼æ¨¡æ“¬ã€Œé ç«¯å®‰è£ + äº’å‹•é¸å–®ã€ï¼ˆæ¨è–¦ï¼‰
./tests/test_full_simulation.sh
# é€™æœƒåœ¨æœ¬æ©Ÿå•Ÿå‹•ä¸€å€‹ HTTP serverï¼ŒDocker å®¹å™¨å…§é€é curl æŠ“å–ç›®å‰å°ˆæ¡ˆè£¡çš„ install.shï¼Œ
# ä¸¦è‡ªå‹•è¼¸å…¥å®‰è£é¸å–®ï¼ˆé è¨­å®‰è£ï¼šPython / åŸºç¤å·¥å…· / çµ‚ç«¯æ©Ÿ / é–‹ç™¼å·¥å…· / ç›£æ§å·¥å…·ï¼Œç•¥é Dockerï¼‰ï¼Œ
# ç”¨ä¾†é©—è­‰ã€Œæœ€æ–°æœ¬æ©Ÿç¨‹å¼ç¢¼ã€çš„å¯¦éš›å®‰è£æµç¨‹ã€‚
```

---

## ğŸ› ï¸ ç³»çµ±ç®¡ç†è…³æœ¬

ä»¥ä¸‹æ˜¯å®‰è£å®Œæˆå¾Œå¸¸ç”¨çš„ç¶­è­·è…³æœ¬ï¼š

- **å¥åº·æª¢æŸ¥**

  ```bash
  ./scripts/health_check.sh
  ```

- **æ›´æ–°æ‰€æœ‰å·¥å…·**

  ```bash
  ./scripts/update_tools.sh
  ```

- **æ¸¬è©¦æ‰€æœ‰å®‰è£è…³æœ¬**

  ```bash
  # åŸºæœ¬è…³æœ¬æ¸¬è©¦
  ./tests/test_scripts.sh

  # å®Œæ•´æ¸¬è©¦å¥—ä»¶
  ./tests/run_all_tests.sh

  # Docker ç’°å¢ƒæ¸¬è©¦
  ./docker-test.sh build     # å»ºç«‹æ¸¬è©¦æ˜ åƒ
  ./docker-test.sh test      # åŸ·è¡Œæ¸¬è©¦
  ./docker-test.sh full-test # å®Œæ•´å®‰è£æ¸¬è©¦
  ```

---

## ğŸ§¾ TUI é¡¯ç¤ºæ¨¡å¼ï¼ˆå®‰è£è¼¸å‡ºï¼‰

å®‰è£è…³æœ¬å…§å»ºå…©ç¨®è¼¸å‡ºæ¨¡å¼ï¼Œå¯é€éç’°å¢ƒè®Šæ•¸ `TUI_MODE` æ§åˆ¶ï¼š

- `quiet`ï¼ˆé è¨­ï¼‰ï¼šåªé¡¯ç¤ºé—œéµæ­¥é©Ÿèˆ‡æˆåŠŸ/å¤±æ•—çµæœï¼Œéš±è— `apt` çš„è©³ç´°è¼¸å‡º
- `normal`ï¼šé¡¯ç¤ºå®Œæ•´çš„å®‰è£èˆ‡ `apt` è¼¸å‡ºï¼ˆé©åˆé™¤éŒ¯æˆ–ç¬¬ä¸€æ¬¡è§€å¯Ÿå®‰è£å…§å®¹ï¼‰

ç¯„ä¾‹ï¼ˆæœ¬æ©Ÿå·² clone å°ˆæ¡ˆæ™‚ï¼‰ï¼š

```bash
# é è¨­å®‰éœæ¨¡å¼ï¼ˆä¸ç”¨ç‰¹åˆ¥è¨­å®šï¼‰
./install.sh

# åˆ‡æ›ç‚ºå®Œæ•´è¼¸å‡ºæ¨¡å¼
TUI_MODE=normal ./install.sh --verbose
```

åŒæ¨£ä¹Ÿå¯ä»¥æ­é…é ç«¯å®‰è£ç”¨æ³•ï¼ˆä¾‹å¦‚ï¼‰ï¼š

```bash
TUI_MODE=normal bash -c "$(curl -fsSL https://raw.githubusercontent.com/guan4tou2/my-linux-setting/main/install.sh)" --verbose
```

---

## ğŸ“ é‡è¦æª”æ¡ˆèˆ‡é…ç½®ä½ç½®

- **Shell / çµ‚ç«¯**

  - zsh è¨­å®šæª”ï¼š`~/.zshrc`
  - powerlevel10kï¼š`~/.p10k.zsh`

- **ç·¨è¼¯å™¨ / é–‹ç™¼å·¥å…·**

  - neovim è¨­å®šï¼š`~/.config/nvim`

- **Python / è™›æ“¬ç’°å¢ƒ**
  - ç³»çµ±å·¥å…·è™›æ“¬ç’°å¢ƒï¼ˆç”± `python_setup.sh` å»ºç«‹ï¼‰ï¼š`~/.local/venv/system-tools`
  - Python å¥—ä»¶ç”± **uv** ç®¡ç†ï¼Œé è¨­æœƒå®‰è£åœ¨ä½¿ç”¨è€…ç›®éŒ„ä¸‹ï¼ˆéç³»çµ±å…¨åŸŸï¼‰

---

## ğŸ’¾ å‚™ä»½èˆ‡æ—¥èªŒ

ç‚ºäº†é¿å…ç ´å£ä½ åŸæœ¬çš„è¨­å®šï¼Œå®‰è£è…³æœ¬åœ¨å‹•æ‰‹å‰æœƒå…ˆï¼š

- **å‚™ä»½èˆŠè¨­å®š**

  - å‚™ä»½ç›®éŒ„ï¼š`~/.config/linux-setting-backup/`
  - æ¯æ¬¡å®‰è£æœƒå»ºç«‹ä¸€å€‹æ™‚é–“æˆ³ç›®éŒ„ï¼Œä¾‹å¦‚ï¼š  
    `~/.config/linux-setting-backup/20250310_123456/`

- **è¨˜éŒ„å®‰è£æ—¥èªŒ**

  - æ—¥èªŒä½ç½®ï¼š`~/.local/log/linux-setting/`
  - æª”åæ ¼å¼ï¼š`install_YYYYMMDD_HHMMSS.log`

- **éŒ¯èª¤æ™‚çš„å›æ»¾æ©Ÿåˆ¶**
  - ç™¼ç”ŸéŒ¯èª¤æ™‚æœƒè©¢å•ä½ æ˜¯å¦è¦ **å›æ»¾åˆ°å®‰è£å‰çš„ç‹€æ…‹**
  - å›æ»¾æœƒå¾å‚™ä»½ç›®éŒ„é‚„åŸè¨­å®šæª”ï¼ˆä¾‹å¦‚ `~/.zshrc`ã€`~/.p10k.zsh`ã€`~/.config/nvim` ç­‰ï¼‰

---

## ğŸ”¬ å…§éƒ¨æŠ€è¡“èˆ‡æœ€ä½³å¯¦å‹™

- **åŒ…ç®¡ç†èˆ‡ Python**

  - ä½¿ç”¨ **uv** ä½œç‚ºä¸»è¦ Python åŒ…ç®¡ç†å™¨ï¼ˆæ¯” pip å¿« 10â€“100 å€ï¼‰
  - è‡ªå‹•æª¢æŸ¥ Python ç‰ˆæœ¬ï¼Œä¸ç¬¦åˆæ™‚æœƒå˜—è©¦ä»¥ `apt` å®‰è£ `python3` / `python3-venv` ç­‰

- **éŒ¯èª¤è™•ç†èˆ‡å®‰å…¨æ€§**

  - å¼·åŒ–éŒ¯èª¤è™•ç†ï¼ˆ`set -eE` + è‡ªè¨‚ `trap`ï¼‰
  - è©³ç´°çš„éŒ¯èª¤æ—¥èªŒèˆ‡è¡Œè™Ÿæç¤º
  - ç¶²è·¯æª¢æŸ¥ï¼ç£ç¢Ÿç©ºé–“æª¢æŸ¥
  - sudo æ¬Šé™æª¢æŸ¥

- **ä½¿ç”¨è€…é«”é©—**
  - äº’å‹•å¼ TUI é¸å–®
  - å½©è‰²è¼¸å‡ºèˆ‡ç‹€æ…‹è¨Šæ¯
  - å®‰è£å ±å‘Šï¼ˆé¡¯ç¤ºå®‰è£äº†å“ªäº›æ¨¡çµ„ã€è¨­å®šæª”èˆ‡æ—¥èªŒä½ç½®ï¼‰

---

## ğŸ”§ è‹¥ä½ æƒ³ fork / å®¢è£½åŒ–æ­¤å°ˆæ¡ˆ

å¦‚æœä½  fork äº†é€™å€‹ repoï¼Œåªè¦ä¿®æ”¹ `install.sh` è£¡çš„ `REPO_URL` å³å¯è®“é ç«¯å®‰è£æŒ‡ä»¤æŒ‡å‘è‡ªå·±çš„ GitHubï¼š

```bash
export REPO_URL="https://raw.githubusercontent.com/{github name}/{repo name}/main"
```

ä¹‹å¾Œå³å¯ä½¿ç”¨ä½ è‡ªå·±çš„é ç«¯å®‰è£æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š

```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/<your-name>/<your-repo>/main/install.sh)"
```

å…¶ä»–è…³æœ¬ï¼ˆä¾‹å¦‚ `scripts/*.sh`ã€`tests/*.sh`ï¼‰éƒ½æœƒè‡ªå‹•è·Ÿè‘— `REPO_URL` åšèª¿æ•´ï¼Œä¸éœ€è¦é¡å¤–æ”¹å‹•ã€‚
